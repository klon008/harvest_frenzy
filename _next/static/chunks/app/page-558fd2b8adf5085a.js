(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4505:(e,t,s)=>{"use strict";s.d(t,{s:()=>n,LanguageProvider:()=>i,P:()=>l});var r=s(5155),a=s(2115);let o={title:"Harvest Frenzy",subtitle:"Click the bushes to harvest and maximize your score!",play_again:"Play Again",total_score:"Total Score",plot:"Plot",game_over_title:"Game Over!",game_over_subtitle:"You harvested a total of {totalScore} fruits!",bonus_triggered:"Bonus chance triggered for non-{color} bushes!",prompt_generator_title:"Prompt Generator",generate_prompt_button:"Generate Prompt",copy_button:"Copy",prompt_generator_desc:'Click "Generate Prompt" to create a detailed prompt for your favorite AI, based on the current game state.',toast_copied_title:"Copied!",toast_copied_desc:"Prompt copied to clipboard.",game_log_title:"Game Log",game_log_empty:"No actions yet. Start harvesting!",log_new_game:"New game started!",log_game_over:"Game Over! Final Score: {totalScore}",log_harvest:"Harvested {color} bush on Plot {plot} for {points} points.",log_neighbor_survived:"Neighbor bush on Plot {plot} survived!",log_neighbor_doubled:"Neighbor bush on Plot {plot} value doubled to x{multiplier}!",log_neighbor_withered:"Neighbor bush on Plot {plot} withered.",log_bonus_applied:"x2 bonus for {color} bush on Plot {plot}!",log_bonus_triggered:"Bonus chance triggered for non-{color} bushes!",prompt_template:"You are a harvest assistant, expert in maximizing scores in the Harvest Frenzy game.\n\nGiven the current state of the garden plots, game history, and the game rules, analyze the situation and provide a recommendation for the next best bush to harvest. Explain your reasoning, considering the probabilities of bonus triggers, neighboring bush effects, and the potential for maximizing the harvest total.\n\nHere's the current game state:\nPlots:\n{plotsState}\nCurrent Score: {currentScore}\n\nGame History (from oldest to newest):\n{logsHistory}\n\nGame Rules:\n- Each plot has two bushes that can be blue, purple, or yellow.\n- Clicking a bush yields 100 points of the corresponding color, and the bush withers.\n- There is a 60% chance the neighboring bush on that plot does not wither.\n- If the neighbor survives and is a different color, there is a 50% chance its value will be doubled (stackable, e.g., x2, x4, etc.).\n- When a bush is clicked, EACH other bush on ALL plots of a different color has a 50% chance to get a x2 bonus multiplier for subsequent harvests. This bonus can also stack.\n\nBased on this, what is your recommendation for the next harvest?"},l={en:o,ru:{title:"Безумный урожай",subtitle:"Нажимайте на кусты, чтобы собрать урожай и набрать максимум очков!",play_again:"Играть снова",total_score:"Общий счет",plot:"Грядка",game_over_title:"Игра окончена!",game_over_subtitle:"Вы собрали {totalScore} фруктов!",bonus_triggered:"Сработал шанс бонуса для кустов не {color} цвета!",prompt_generator_title:"Генератор промптов",generate_prompt_button:"Сгенерировать промпт",copy_button:"Копировать",prompt_generator_desc:'Нажмите "Сгенерировать промпт", чтобы создать подробный запрос для вашего любимого ИИ на основе текущего состояния игры.',toast_copied_title:"Скопировано!",toast_copied_desc:"Промпт скопирован в буфер обмена.",game_log_title:"Лог игры",game_log_empty:"Пока нет действий. Начните собирать урожай!",log_new_game:"Новая игра началась!",log_game_over:"Игра окончена! Итоговый счет: {totalScore}",log_harvest:"Собран {color} куст на грядке {plot}, получено {points} очков.",log_neighbor_survived:"Соседний куст на грядке {plot} выжил!",log_neighbor_doubled:"Ценность соседнего куста на грядке {plot} удвоилась до x{multiplier}!",log_neighbor_withered:"Соседний куст на грядке {plot} увял.",log_bonus_applied:"x2 бонус для {color} куста на грядке {plot}!",log_bonus_triggered:"Сработал шанс бонуса для кустов не {color} цвета!",prompt_template:'Вы — ассистент по сбору урожая, эксперт в максимизации очков в игре "Безумный урожай".\n\nУчитывая текущее состояние грядок, историю игры и правила, проанализируйте ситуацию и дайте рекомендацию по следующему лучшему кусту для сбора. Объясните свои рассуждения, учитывая вероятности срабатывания бонусов, эффекты соседних кустов и потенциал для максимизации общего урожая.\n\nТекущее состояние игры:\nГрядки:\n{plotsState}\nТекущий счет: {currentScore}\n\nИстория игры (от старых к новым):\n{logsHistory}\n\nПравила игры:\n- На каждой грядке есть два куста, которые могут быть синего, фиолетового или желтого цвета.\n- Нажатие на куст приносит 100 очков соответствующего цвета, и куст увядает.\n- Существует 60% шанс, что соседний куст на той же грядке не увянет.\n- Если сосед выживает и имеет другой цвет, есть 50% шанс, что его ценность удвоится (может складываться, например, x2, x4 и т.д.).\n- При нажатии на куст, КАЖДЫЙ другой куст на ВСЕХ грядках другого цвета имеет 50% шанс получить бонусный множитель x2 для последующих сборов. Этот бонус также может складываться.\n\nИсходя из этого, какова ваша рекомендация для следующего сбора?'}},n=(0,a.createContext)({language:"en",setLanguage:()=>{},t:o}),i=e=>{let{children:t}=e,[s,o]=(0,a.useState)("en"),i=l[s];return(0,r.jsx)(n.Provider,{value:{language:s,setLanguage:o,t:i},children:t})}},7163:(e,t,s)=>{Promise.resolve().then(s.bind(s,9464))},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(2115);let a=0,o=new Map,l=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function d(e){c=n(c,e),i.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var r=s(2596),a=s(9688);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},9464:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var r=s(5155),a=s(2115);let o=["blue","purple","yellow"],l=()=>o[Math.floor(Math.random()*o.length)],n=()=>{let e=Math.floor(3*Math.random())+3,t=[];for(let s=0;s<e;s++){let e=[{id:1,color:l(),value:100,isWithered:!1,bonusMultiplier:1},{id:2,color:l(),value:100,isWithered:!1,bonusMultiplier:1}];t.push({id:s+1,bushes:e})}return t};var i=s(9708),c=s(2085),d=s(9434);let u=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:l=!1,...n}=e,c=l?i.DX:"button";return(0,r.jsx)(c,{className:(0,d.cn)(u({variant:a,size:o,className:s})),ref:t,...n})});m.displayName="Button";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});p.displayName="Card";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",s),...a})});x.displayName="CardHeader";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});f.displayName="CardTitle";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...a})});h.displayName="CardDescription";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",s),...a})});g.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";var b=s(7554),v=s(3503),j=s(4601),_=s(9272),y=s(7481);let N=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});N.displayName="Textarea";var w=s(4505);function S(e){let{plots:t,currentScore:s,logs:o}=e,[l,n]=(0,a.useState)(""),{toast:i}=(0,y.dj)(),{language:c}=(0,a.useContext)(w.s),d=w.P[c];return(0,r.jsxs)(p,{className:"mb-6 bg-card/80 backdrop-blur-sm shadow-lg border-primary/20",children:[(0,r.jsxs)(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"h-6 w-6 text-primary"}),(0,r.jsx)(f,{className:"text-lg",children:d.prompt_generator_title})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(m,{onClick:()=>{let e=t.map((e,t)=>{let s=e.bushes.map(e=>"".concat(e.color," (withered: ").concat(e.isWithered,", bonus: x").concat(e.bonusMultiplier,", value: ").concat(e.value,")")).join(", ");return"  ".concat(d.plot," ").concat(t+1,": [").concat(s,"]")}).join("\n"),r=[...o].reverse().map(e=>{let t=d[e.message]||e.message;return e.values&&Object.entries(e.values).forEach(e=>{let[s,r]=e;t=t.replace("{".concat(s,"}"),r)}),"[".concat(e.timestamp.toLocaleTimeString(),"] ").concat(t)}).join("\n");n(d.prompt_template.replace("{plotsState}",e).replace("{currentScore}",s.toString()).replace("{logsHistory}",r))},children:[(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4"}),d.generate_prompt_button]}),l&&(0,r.jsxs)(m,{onClick:()=>{l&&(navigator.clipboard.writeText(l),i({title:d.toast_copied_title,description:d.toast_copied_desc}))},variant:"outline",children:[(0,r.jsx)(_.A,{className:"mr-2 h-4 w-4"}),d.copy_button]})]})]}),(0,r.jsx)(g,{children:l?(0,r.jsx)(N,{readOnly:!0,value:l,className:"mt-2 w-full h-48 text-sm bg-muted/50 font-mono","aria-label":"Generated AI Prompt"}):(0,r.jsx)(h,{className:"pt-2",children:d.prompt_generator_desc})})]})}let k=(0,c.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function C(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)(k({variant:s}),t),...a})}let A={blue:{main:"#3b82f6",shadow:"#1d4ed8"},purple:{main:"#a855f7",shadow:"#7e22ce"},yellow:{main:"#facc15",shadow:"#ca8a04"}};function M(e){let{color:t,className:s,...a}=e,{main:o,shadow:l}=A[t];return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",className:(0,d.cn)("w-16 h-16",s),...a,children:(0,r.jsxs)("g",{transform:"translate(0, -5)",children:[(0,r.jsx)("path",{d:"M 50,70 C 40,90 30,80 30,95 L 70,95 C 70,80 60,90 50,70",fill:"#8B5E3C"}),(0,r.jsx)("path",{d:"M 50,75 C 55,70 60,65 52,60",stroke:"#654321",strokeWidth:"2",fill:"none"}),(0,r.jsx)("circle",{cx:"50",cy:"40",r:"12",fill:o}),(0,r.jsx)("circle",{cx:"50",cy:"40",r:"10",fill:o,stroke:l,strokeWidth:"1"}),(0,r.jsx)("circle",{cx:"38",cy:"50",r:"12",fill:o}),(0,r.jsx)("circle",{cx:"38",cy:"50",r:"10",fill:o,stroke:l,strokeWidth:"1"}),(0,r.jsx)("circle",{cx:"62",cy:"50",r:"12",fill:o}),(0,r.jsx)("circle",{cx:"62",cy:"50",r:"10",fill:o,stroke:l,strokeWidth:"1"}),(0,r.jsx)("circle",{cx:"50",cy:"60",r:"12",fill:o}),(0,r.jsx)("circle",{cx:"50",cy:"60",r:"10",fill:o,stroke:l,strokeWidth:"1"}),(0,r.jsx)("circle",{cx:"42",cy:"28",r:"12",fill:o}),(0,r.jsx)("circle",{cx:"42",cy:"28",r:"10",fill:o,stroke:l,strokeWidth:"1"}),(0,r.jsx)("circle",{cx:"58",cy:"28",r:"12",fill:o}),(0,r.jsx)("circle",{cx:"58",cy:"28",r:"10",fill:o,stroke:l,strokeWidth:"1"}),(0,r.jsx)("path",{d:"M 50,30 C 40,10 60,10 50,30",fill:"#22C55E"}),(0,r.jsx)("path",{d:"M 50,30 C 60,20 70,30 50,30",fill:"#16A34A"})]})})}var T=s(9051);let P=a.forwardRef((e,t)=>{let{className:s,children:a,...o}=e;return(0,r.jsxs)(T.bL,{ref:t,className:(0,d.cn)("relative overflow-hidden",s),...o,children:[(0,r.jsx)(T.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(E,{}),(0,r.jsx)(T.OK,{})]})});P.displayName=T.bL.displayName;let E=a.forwardRef((e,t)=>{let{className:s,orientation:a="vertical",...o}=e;return(0,r.jsx)(T.VM,{ref:t,orientation:a,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...o,children:(0,r.jsx)(T.lr,{className:"relative flex-1 rounded-full bg-border"})})});E.displayName=T.VM.displayName;var O=s(5291),z=s(4733),R=s(9829);let W={action:{icon:O.A,color:"text-blue-500",badge:"secondary"},event:{icon:z.A,color:"text-gray-500",badge:"outline"},bonus:{icon:R.A,color:"text-yellow-500",badge:"default"}};function I(e){let{logs:t}=e,{language:s}=(0,a.useContext)(w.s),o=w.P[s],l=e=>{let t=o[e.message]||e.message;return e.values&&Object.entries(e.values).forEach(e=>{let[s,r]=e;t=t.replace("{".concat(s,"}"),r)}),t};return(0,r.jsxs)(p,{className:"h-full flex flex-col",children:[(0,r.jsxs)(x,{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(z.A,{className:"h-6 w-6 text-primary"}),(0,r.jsx)(f,{children:o.game_log_title})]}),(0,r.jsx)(g,{className:"flex-grow p-0",children:(0,r.jsx)(P,{className:"h-[600px] p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[0===t.length&&(0,r.jsx)("p",{className:"text-muted-foreground text-center p-4",children:o.game_log_empty}),t.map((e,t)=>{let s=W[e.type],a=s.icon;return(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:(0,d.cn)("flex-shrink-0 mt-1 h-5 w-5 flex items-center justify-center rounded-full bg-muted",s.color),children:(0,r.jsx)(a,{className:"h-3.5 w-3.5"})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("p",{className:"text-sm text-foreground/90",children:l(e)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]})]},t)})]})})})]})}var L=s(2536),G=s(3158),H=s(518),D=s(154);let F=L.bL,V=L.l9;L.YJ,L.ZL,L.Pb;let B=L.z6;a.forwardRef((e,t)=>{let{className:s,inset:a,children:o,...l}=e;return(0,r.jsxs)(L.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...l,children:[o,(0,r.jsx)(G.A,{className:"ml-auto"})]})}).displayName=L.ZP.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(L.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=L.G5.displayName;let U=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...o}=e;return(0,r.jsx)(L.ZL,{children:(0,r.jsx)(L.UC,{ref:t,sideOffset:a,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})})});U.displayName=L.UC.displayName,a.forwardRef((e,t)=>{let{className:s,inset:a,...o}=e;return(0,r.jsx)(L.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...o})}).displayName=L.q7.displayName,a.forwardRef((e,t)=>{let{className:s,children:a,checked:o,...l}=e;return(0,r.jsxs)(L.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:o,...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(L.VF,{children:(0,r.jsx)(H.A,{className:"h-4 w-4"})})}),a]})}).displayName=L.H_.displayName;let J=a.forwardRef((e,t)=>{let{className:s,children:a,...o}=e;return(0,r.jsxs)(L.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(L.VF,{children:(0,r.jsx)(D.A,{className:"h-2 w-2 fill-current"})})}),a]})});J.displayName=L.hN.displayName;let Z=a.forwardRef((e,t)=>{let{className:s,inset:a,...o}=e;return(0,r.jsx)(L.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...o})});Z.displayName=L.JU.displayName;let q=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(L.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});q.displayName=L.wv.displayName;var Y=s(7679);function X(){let{language:e,setLanguage:t}=(0,a.useContext)(w.s);return(0,r.jsxs)(F,{children:[(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)(m,{variant:"outline",size:"icon",children:[(0,r.jsx)(Y.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Change language"})]})}),(0,r.jsxs)(U,{className:"w-40",children:[(0,r.jsx)(Z,{children:"Language"}),(0,r.jsx)(q,{}),(0,r.jsxs)(B,{value:e,onValueChange:e=>t(e),children:[(0,r.jsx)(J,{value:"en",children:"English"}),(0,r.jsx)(J,{value:"ru",children:"Русский"})]})]})]})}function K(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)({blue:0,purple:0,yellow:0}),[l,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,x]=(0,a.useState)([]),{language:f}=(0,a.useContext)(w.s),h=w.P[f],v=(0,a.useMemo)(()=>Object.values(s).reduce((e,t)=>e+t,0),[s]),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"action",s=arguments.length>2?arguments[2]:void 0;x(r=>[{message:e,type:t,timestamp:new Date,values:s},...r])},_=(0,a.useCallback)(()=>{t(n()),o({blue:0,purple:0,yellow:0}),i(!1),x([]),j("log_new_game","event")},[]);(0,a.useEffect)(()=>{_()},[_]),(0,a.useEffect)(()=>{e.length>0&&e.every(e=>e.bushes.every(e=>e.isWithered))&&(i(!0),j("log_game_over","event",{totalScore:v}))},[e,v]);let y=(s,r)=>{if(l)return;let a=JSON.parse(JSON.stringify(e)),n=a.findIndex(e=>e.id===s);if(-1===n)return;let i=a[n].bushes.findIndex(e=>e.id===r);if(-1===i)return;let c=a[n].bushes[i];if(c.isWithered)return;let u=c.value*c.bonusMultiplier;o(e=>({...e,[c.color]:e[c.color]+u})),j("log_harvest","action",{color:c.color,plot:n+1,points:u}),c.isWithered=!0;let m=a[n].bushes[+(0===i)];m&&!m.isWithered&&(.6>Math.random()?(j("log_neighbor_survived","event",{plot:n+1}),m.color!==c.color&&.5>Math.random()&&(m.bonusMultiplier*=2,j("log_neighbor_doubled","bonus",{plot:n+1,multiplier:m.bonusMultiplier}))):(m.isWithered=!0,j("log_neighbor_withered","event",{plot:n+1})));let p=c.color,x=!1;a=a.map((e,t)=>({...e,bushes:e.bushes.map((e,s)=>!e.isWithered&&e.color!==p&&.5>Math.random()?(x=!0,j("log_bonus_applied","bonus",{color:e.color,plot:t+1}),{...e,bonusMultiplier:2*e.bonusMultiplier}):e)})),x&&(d(h.bonus_triggered.replace("{color}",p)),j("log_bonus_triggered","event",{color:p}),setTimeout(()=>d(null),2e3)),t(a)};return(0,r.jsxs)("main",{className:"container mx-auto p-4 sm:p-6 md:p-8 font-body",children:[(0,r.jsxs)("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[(0,r.jsxs)("div",{className:"text-center sm:text-left",children:[(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold font-headline text-primary-foreground/90 tracking-tight",children:h.title}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:h.subtitle})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(X,{}),(0,r.jsxs)(m,{onClick:_,size:"lg",children:[(0,r.jsx)(b.A,{className:"mr-2 h-5 w-5"})," ",h.play_again]})]})]}),(0,r.jsx)(p,{className:"mb-6 bg-card/80 backdrop-blur-sm",children:(0,r.jsxs)(g,{className:"p-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 sm:gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(M,{color:"blue",className:"w-8 h-8"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:s.blue})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(M,{color:"purple",className:"w-8 h-8"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-purple-600",children:s.purple})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(M,{color:"yellow",className:"w-8 h-8"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-yellow-500",children:s.yellow})]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:h.total_score}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:v})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsx)(S,{plots:e,currentScore:v,logs:u}),l&&(0,r.jsxs)(p,{className:"my-6 text-center p-6 bg-primary/20 border-primary",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:h.game_over_title}),(0,r.jsx)("p",{className:"text-xl mt-2",children:h.game_over_subtitle.replace("{totalScore}",v.toString())}),(0,r.jsx)(m,{onClick:_,className:"mt-4",children:h.play_again})]}),c&&(0,r.jsx)("div",{className:"fixed top-5 right-5 bg-accent text-accent-foreground p-3 rounded-lg shadow-lg animate-in fade-in zoom-in",children:c}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mt-8",children:e.map((e,t)=>(0,r.jsxs)(p,{className:"p-4 flex flex-col items-center gap-4 shadow-md hover:shadow-xl transition-shadow duration-300",children:[(0,r.jsxs)("h3",{className:"font-bold text-lg text-muted-foreground",children:[h.plot," ",t+1]}),(0,r.jsx)("div",{className:"flex justify-center items-end gap-4",children:e.bushes.map(t=>(0,r.jsxs)("div",{className:"relative flex flex-col items-center",children:[t.bonusMultiplier>1&&!t.isWithered&&(0,r.jsxs)(C,{variant:"destructive",className:"absolute -top-2 z-10 animate-pulse bg-accent text-accent-foreground",children:["x",t.bonusMultiplier]}),(0,r.jsx)("button",{onClick:()=>y(e.id,t.id),disabled:t.isWithered||l,"aria-label":"Harvest ".concat(t.color," bush"),className:"transition-all duration-300 ease-in-out ".concat(t.isWithered?"opacity-30 scale-75 grayscale":"hover:scale-110 cursor-pointer"),children:(0,r.jsx)(M,{color:t.color,className:"w-24 h-24"})}),(0,r.jsx)("span",{className:"text-sm font-semibold text-muted-foreground",children:t.value*t.bonusMultiplier})]},t.id))})]},e.id))})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(I,{logs:u})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[230,779,441,684,358],()=>t(7163)),_N_E=e.O()}]);